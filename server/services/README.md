# open-api folder

This folder contains all the clients that we support, generated by [open-api-generator](https://github.com/openapitools/openapi-generator-cli) based on their Open API Spec.

In each folder we will store it's openapi spec as a yaml file, as a source of truth. We will use openapi-generator-cli to generate the OCaml code keep it in git, allowing us to have control over the source for each and the flexibility to modify it (both the spec and the generated code).

### Generate a client

1. Install JDK
2. Install openapi-generator-cli (from npm or homebrew)
3. Run `openapi-generator-cli generate -i open-api-spec.yaml -g ocaml -o output_folder --enable-post-process-file`, as an example: `openapi-generator-cli generate -i specs/stripe.yaml -g ocaml -o stripe --enable-post-process-file`. Options and additionalProperties may vary from each client.
4. Modify the source structure
  - Rename dune/dune-projects to the actual service name
  - Rename `openapi.opam` to `{{service}}.opam`